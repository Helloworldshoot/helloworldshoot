<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>Angry Hello World with Defense Line - Start</title>
<style>
  body {
    margin: 0; padding: 0;
    background-color: #0a0a0a;
    height: 100vh;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: white;
    user-select: none;
  }
  h1 { text-align: center; padding-top: 40px; }
  #scoreDisplay, #starDisplay {
    text-align: center;
    font-size: 1.5em;
  }
  #helloPreview {
    font-size: 5em;
    margin: 30px auto;
    text-align: center;
    user-select: none;
    transition: color 0.5s ease, background-image 0.5s ease, font-family 0.5s ease;
  }
  #buttons {
    text-align: center;
    margin: 20px;
  }
  button {
    font-size: 1em;
    padding: 10px 20px;
    margin: 5px;
    border-radius: 6px;
    cursor: pointer;
    background-color: #333;
    color: white;
    border: none;
  }
  #popup {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    background: #222;
    padding: 20px;
    border-radius: 10px;
    display: none;
    z-index: 1000;
    max-width: 90vw;
    color: white;
  }
  #popup h3 { margin-top: 0; }
  #popup button.skin {
    display: inline-block;
    margin: 5px;
    padding: 6px 10px;
    border-radius: 4px;
    background-color: #444;
    position: relative;
  }
  .checkmark {
    position: absolute;
    top: -5px; right: -5px;
    background: lime;
    color: black;
    border-radius: 50%;
    width: 18px; height: 18px;
    font-size: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
</style>
</head>
<body>
<h1>Hello World! ìŠˆíŒ… ê²Œì„ (Made by ë²”ì„œ) Ver 1.41</h1>
<div id="scoreDisplay">Score: 0</div>
<div id="starDisplay">ì´ˆì›” íšŸìˆ˜: 0 â­</div>
<!-- ì¶”ê°€: Hello World! ë¯¸ë¦¬ë³´ê¸° -->
<div id="helloPreview">Hello World!</div>

<div id="buttons">
  <button onclick="location.href='game.html'">â–¶ï¸ ê²Œì„ ì‹œì‘</button>
  <button onclick="showSkinCollection()">ğŸ ì¼ë°˜ ìŠ¤í‚¨ ë½‘ê¸°</button>
  <button onclick="showTransCollection()">ğŸŒŒ ì´ˆì›” ìŠ¤í‚¨ ë³´ê¸°</button>
  <button onclick="tryTranscendence()">âœ¨ ì´ˆì›”í•˜ê¸°</button>
</div>
<div id="popup"></div>

<script>
const popup = document.getElementById('popup');
const scoreDisplay = document.getElementById('scoreDisplay');
const starDisplay = document.getElementById('starDisplay');
const helloPreview = document.getElementById('helloPreview');

let score = parseInt(localStorage.getItem('lastScore')) || 0;
let ownedSkins = JSON.parse(localStorage.getItem('helloSkins')) || ['ê¸°ë³¸'];
let selectedSkin = localStorage.getItem('helloSelectedSkin') || 'ê¸°ë³¸';
let selectedTransSkin = localStorage.getItem('helloSelectedTransSkin') || '';
let transSkins = JSON.parse(localStorage.getItem('transSkins')) || [];
let transCount = parseInt(localStorage.getItem('transCount')) || 0;

scoreDisplay.textContent = 'Score: ' + score;
starDisplay.textContent = `ì´ˆì›” íšŸìˆ˜: ${transCount} â­`;

const skins = [
  { name: "ê¸°ë³¸", rarity: "common", color: "white" },
  { name: "ë¹¨ê°•", rarity: "common", color: "red" },
  { name: "íŒŒë‘", rarity: "common", color: "blue" },
  { name: "ì´ˆë¡", rarity: "common", color: "green" },
  { name: "ë…¸ë‘", rarity: "common", color: "yellow" },
  { name: "ë³´ë¼", rarity: "common", color: "purple" },
  { name: "ê²€ì •", rarity: "rare", color: "black" },
  { name: "ì²­ë¡", rarity: "rare", color: "teal" },
  { name: "í•‘í¬", rarity: "rare", color: "pink" },
  { name: "ë ˆì¸ë³´ìš°", rarity: "legendary", color: "linear-gradient(45deg, red, orange, yellow, green, blue, indigo, violet)" }
];

const transcendSkins = [
  { name: "ì´ˆì›”-ë¶ˆê½ƒ", color: "orangered", font: "Impact" },
  { name: "ì´ˆì›”-ë¹™ê²°", color: "deepskyblue", font: "Arial Black" },
  { name: "ì´ˆì›”-ë²ˆê°œ", color: "gold", font: "Courier New" },
  { name: "ì´ˆì›”-ëŒ€ì§€", color: "saddlebrown", font: "Georgia" },
  { name: "ì´ˆì›”-í­í’", color: "slateblue", font: "Verdana" },
  { name: "ì´ˆì›”-ì–´ë‘ ", color: "black", font: "Trebuchet MS" },
  { name: "ì´ˆì›”-ë¹›", color: "white", font: "Lucida Console" },
  { name: "ì´ˆì›”-ë…", color: "purple", font: "Comic Sans MS" },
  { name: "ì´ˆì›”-ì‹œê°„", color: "silver", font: "Tahoma" },
  { name: "ì´ˆì›”-ê³µê°„", color: "navy", font: "Palatino Linotype" },
  { name: "ì´ˆì›”-ì •ë ¹", color: "forestgreen", font: "Garamond" },
  { name: "ì´ˆì›”-ê¸ˆì†", color: "gray", font: "Futura" },
  { name: "ì´ˆì›”-ìŒì†", color: "cyan", font: "Segoe UI" },
  { name: "ì´ˆì›”-ìš©ì•”", color: "crimson", font: "Rockwell" },
  { name: "ì´ˆì›”-ëˆˆë³´ë¼", color: "lightblue", font: "Calibri" },
  { name: "ì´ˆì›”-í™˜ìƒ", color: "mediumorchid", font: "Brush Script MT" },
  { name: "ì´ˆì›”-ê¸°ê³„", color: "darkgray", font: "Roboto Mono" },
  { name: "ì´ˆì›”-ìœ ì„±", color: "firebrick", font: "Orbitron" },
  { name: "ì´ˆì›”-ë°”ë‹¤", color: "teal", font: "Quicksand" },
  { name: "ì´ˆì›”-ìš°ì£¼", color: "darkslateblue", font: "Exo 2" }
];

// ìŠ¤í‚¨ ì ìš© í•¨ìˆ˜ (ë¯¸ë¦¬ë³´ê¸°ìš©)
function applyPreviewSkin() {
  if (selectedTransSkin) {
    const tSkin = transcendSkins.find(s => s.name === selectedTransSkin);
    if (tSkin) {
      helloPreview.style.color = tSkin.color;
      helloPreview.style.fontFamily = tSkin.font;
      helloPreview.style.backgroundImage = 'none';
      helloPreview.style.webkitBackgroundClip = '';
      helloPreview.style.webkitTextFillColor = '';
      return;
    }
  }
  // ì¼ë°˜ ìŠ¤í‚¨ ì ìš©
  const skin = skins.find(s => s.name === selectedSkin);
  if (skin) {
    if (skin.name === 'ë ˆì¸ë³´ìš°') {
      helloPreview.style.backgroundImage = skin.color;
      helloPreview.style.webkitBackgroundClip = "text";
      helloPreview.style.webkitTextFillColor = "transparent";
      helloPreview.style.color = 'unset';
      helloPreview.style.fontFamily = '';
    } else {
      helloPreview.style.backgroundImage = 'none';
      helloPreview.style.webkitBackgroundClip = '';
      helloPreview.style.webkitTextFillColor = '';
      helloPreview.style.color = skin.color;
      helloPreview.style.fontFamily = '';
    }
  } else {
    // ê¸°ë³¸ fallback
    helloPreview.style.color = 'white';
    helloPreview.style.fontFamily = '';
    helloPreview.style.backgroundImage = 'none';
    helloPreview.style.webkitBackgroundClip = '';
    helloPreview.style.webkitTextFillColor = '';
  }
}

function showSkinCollection() {
  popup.innerHTML = `<h3>ë³´ìœ  ì¼ë°˜ ìŠ¤í‚¨</h3>`;
  ownedSkins.forEach(skinName => {
    popup.innerHTML += `<button class="skin" onclick="chooseSkin('${skinName}')">${skinName}${selectedSkin === skinName && !selectedTransSkin ? '<span class="checkmark">âœ”</span>' : ''}</button>`;
  });
  popup.innerHTML += `<br><br><button onclick="drawSkin()">ğŸ” ìŠ¤í‚¨ ë½‘ê¸° (10ì )</button>`;
  popup.innerHTML += `<br><button onclick="closePopup()">ë‹«ê¸°</button>`;
  popup.style.display = 'block';
}

function showTransCollection() {
  popup.innerHTML = `<h3>ë³´ìœ  ì´ˆì›” ìŠ¤í‚¨</h3>`;
  if (transSkins.length === 0) {
    popup.innerHTML += `<p>âŒ ì•„ì§ ì´ˆì›” ìŠ¤í‚¨ì´ ì—†ìŠµë‹ˆë‹¤.</p>`;
  } else {
    transSkins.forEach(skin => {
      popup.innerHTML += `<button class="skin" onclick="chooseTransSkin('${skin.name}')">ğŸŒ  ${skin.name}${selectedTransSkin === skin.name ? '<span class="checkmark">âœ”</span>' : ''}</button>`;
    });
  }
  popup.innerHTML += `<br><button onclick="closePopup()">ë‹«ê¸°</button>`;
  popup.style.display = 'block';
}

function drawSkin() {
  if (score < 10) {
    alert("ì ìˆ˜ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤! (10ì  í•„ìš”)");
    return;
  }
  score -= 10;
  const picked = skins[Math.floor(Math.random() * skins.length)];
  if (!ownedSkins.includes(picked.name)) {
    ownedSkins.push(picked.name);
    alert(`ğŸ‰ ìƒˆ ìŠ¤í‚¨ íšë“! ${picked.name}`);
  } else {
    score += 2;
    alert(`ğŸ” ì¤‘ë³µ! 2ì  ë°˜í™˜ (${picked.name})`);
  }
  saveState();
  updateDisplay();
  showSkinCollection();
}

function chooseSkin(name) {
  selectedSkin = name;
  selectedTransSkin = '';  // ì¼ë°˜ ìŠ¤í‚¨ ì„ íƒ ì‹œ ì´ˆì›” ìŠ¤í‚¨ í•´ì œ
  saveState();
  applyPreviewSkin();
  showSkinCollection();
}

function chooseTransSkin(name) {
  selectedTransSkin = name;
  selectedSkin = 'ê¸°ë³¸';   // ì´ˆì›” ìŠ¤í‚¨ ì„ íƒ ì‹œ ì¼ë°˜ ìŠ¤í‚¨ì€ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •
  saveState();
  applyPreviewSkin();
  showTransCollection();
}

function tryTranscendence() {
  // ì¼ë°˜ ìŠ¤í‚¨ ëª¨ë‘ ë³´ìœ  ì—¬ë¶€ í™•ì¸ (skins ë°°ì—´ ê¸°ì¤€)
  const allOwned = skins.every(s => ownedSkins.includes(s.name));
  if (!allOwned) {
    alert("âš ï¸ ì¼ë°˜ ìŠ¤í‚¨ 10ì¢…ì„ ëª¨ë‘ ë³´ìœ í•´ì•¼ ì´ˆì›”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
    return;
  }
  // ì•„ì§ íšë“í•˜ì§€ ì•Šì€ ì´ˆì›” ìŠ¤í‚¨ ì¤‘ í•˜ë‚˜ íšë“
  const remaining = transcendSkins.filter(ts => !transSkins.some(t => t.name === ts.name));
  if (remaining.length === 0) {
    alert("ğŸŒŸ ì´ˆì›” ìŠ¤í‚¨ì„ ëª¨ë‘ íšë“í–ˆìŠµë‹ˆë‹¤!");
    return;
  }
  const pick = remaining[Math.floor(Math.random() * remaining.length)];
  transSkins.push(pick);
  transCount++;
  // ì¼ë°˜ ìŠ¤í‚¨ ì´ˆê¸°í™”
  ownedSkins = ['ê¸°ë³¸'];
  selectedSkin = 'ê¸°ë³¸';
  selectedTransSkin = '';
  alert(`âœ¨ ì´ˆì›” ì„±ê³µ! '${pick.name}' ìŠ¤í‚¨ íšë“!`);
  saveState();
  updateDisplay();
  applyPreviewSkin();
}

function closePopup() {
  popup.style.display = 'none';
}

function saveState() {
  localStorage.setItem('helloSkins', JSON.stringify(ownedSkins));
  localStorage.setItem('helloSelectedSkin', selectedSkin);
  localStorage.setItem('helloSelectedTransSkin', selectedTransSkin);
  localStorage.setItem('transSkins', JSON.stringify(transSkins));
  localStorage.setItem('transCount', transCount);
  localStorage.setItem('lastScore', score);
}

function updateDisplay() {
  scoreDisplay.textContent = 'Score: ' + score;
  starDisplay.textContent = `ì´ˆì›” íšŸìˆ˜: ${transCount} â­`;
}

// ì´ˆê¸° í‘œì‹œ
updateDisplay();
applyPreviewSkin();
</script>
</body>
</html>
